# Basic Pentesting

Buenas, 
aquí vamos a hablar de como hacer la Room Basic Pentesting,\
en resumen es una máquina inicial para practicar hacking a una aplicación web.\
La veo muy adecuada para la gente que empieza en el mundillo del hacking\
ya que se usan algunas de las técnicas más conocidas como fuerza bruta, hash cracking, enumeración.
\
\
Iniciamos la máquina y una vez esté arrancada revisamos su ip.\
En mi caso es 10.10.8.16, pero vosotros usad la vuestra
y poned la vpn\
Lo primero que hacemos es un ping para comprobar que está la máquina lista.

<img src="./images/Ping.png" width="500"/>

Vamos a hacer el escaneo de servicios con un nmap completo

<img src="./images/nmap.png" width="500"/>

Las CTFs suelen tener los servicios en puertos no estándar, 
es recomendable escanear todo el rango de puertos aunque tarden más.\
Ahora bien, los puertos abiertos que tenemos más interesantes son el SSH y HTTP para esta máquina.
Seguimos las pautas de TryHackMe, nos enfocamos en el HTTP\
Revisemoslo.

<img src="./images/webpage.png" width="500"/>

Está en "mantenimiento", comprobaremos si tiene alguna otra ruta con gobuster\
herramienta que prueba diferentes rutas sobre una máquina objetivo
y te dice si existen o no, potencialmente encontrando páginas ocultas.\
Para poder utilizar esta herramienta correctamente necesitamos una IP
y un diccionario, el diccionario en realidad son un montón de palabras escritas
en un archivo txt y que dirb las coge de una en una para probar rutas.

Veamos el comando:

<img src="./images/gobuster1.png" width="500"/>

<img src="./images/gobuster2.png" width="500"/>

Podemos ver que la página "secreta" es development, vamos a echarle un vistazo

<img src="./images/developmentweb.png" width="500"/>

Vemos que hay un par de archivos.

<img src="./images/development_web_j" width="500"/>

<img src="./images/development_web_dev" width="500"/>


dev.txt nos comenta que hay un SMB, y que menciona una versión eso es información valiosa.\
j.txt es una carta a un tal J y su compañero le dice que su contraseña es muy insegura
por medio de **Hash Cracking**.
Teniendo en cuenta que la contraseña de ese tal J es bastante fácil de romper...
seguramente sea viable hacer una fuerza bruta por SSH.
Hacemos un enum4linux para comprobar si nos da usuarios.

<img src="./images/enum4.png" width="500"/>

<img src="./images/enum4_2.png" width="500"/>

Se puede entrar como usuario anónimo. (con SMB aunque no lo he hecho por esa ruta)\
Pero más interesante es que hemos encontrado a los usuarios de las cartas que son Jan y Kay.\
Nos facilita mucho la fuerza bruta, vamos a hacerlo con Hydra y  el usuario jan

<img src="./images/hydrabruteforce.png" width="500"/>

<img src="./images/hydrabruteforce2.png" width="500"/>

Tachán! Tenemos la contraseña de Jan
Nos metemos por ssh.

<img src="./images/ssh1.png" width="500"/>

<img src="./images/ssh2.png" width="500"/>

Y estamos dentro.
Hacemos un ls y nos vamos situando.

<img src="./images/ssh4.png" width="500"/>

pass.bak requiere escalada de privilegios.
probamos a ver .ssh de Kay.

<img src="./images/cat_pass.png" width="500"/>

<img src="./images/cat_idrsa.png" width="500"/>

Podemos crackear la llave porque esta encriptada, tenemos que desencriptarla

<img src="./images/decrypt.png" width="500"/>

Ahora si le hacemos el john

<img src="./images/johntheripper.png" width="500"/>

Y finalmente hacemos el ssh 

<img src="./images/passphrase_elevation.png" width="500"/>

Estamos con Kay y hacemos cat del pass.bak para terminar el ejercicio






